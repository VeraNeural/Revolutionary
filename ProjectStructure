# ğŸ—ï¸ VERA Neural - Complete Project Structure

## ğŸ“ File Organization

```
vera-neural/
â”‚
â”œâ”€â”€ ğŸ¨ FRONTEND (Deploy to Netlify)
â”‚   â”œâ”€â”€ index.html              # Landing page with orb sequence
â”‚   â””â”€â”€ chat.html               # Chat interface with message limit
â”‚
â”œâ”€â”€ ğŸ§  BACKEND (Deploy to Railway/Render)
â”‚   â”œâ”€â”€ server.js               # Express server (auth, payments, API)
â”‚   â”œâ”€â”€ vera-ai.js              # VERA's consciousness engine
â”‚   â”œâ”€â”€ package.json            # Node.js dependencies
â”‚   â”œâ”€â”€ .env.local              # Environment variables (CREATE THIS!)
â”‚   â””â”€â”€ .gitignore              # Protect secrets
â”‚
â”œâ”€â”€ ğŸ—„ï¸ DATABASE
â”‚   â””â”€â”€ database-schema.sql     # PostgreSQL schema
â”‚
â””â”€â”€ ğŸ“š DOCUMENTATION
    â”œâ”€â”€ README.md               # Complete setup guide
    â”œâ”€â”€ DEPLOYMENT-CHECKLIST.md # Step-by-step deployment
    â”œâ”€â”€ .env.example            # Environment template
    â””â”€â”€ PROJECT-STRUCTURE.md    # This file
```

---

## ğŸ”„ How Everything Connects

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER'S BROWSER                       â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  index.html    â”‚ â”€â”€â”€â”€â”€â”€> â”‚   chat.html      â”‚           â”‚
â”‚  â”‚  (Landing)     â”‚         â”‚   (Chat UI)      â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚         â”‚                            â”‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                            â”‚
          â”‚                            â”‚ API Calls
          â”‚                            â–¼
          â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                   â”‚   server.js      â”‚
          â”‚                   â”‚  (Express API)   â”‚
          â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                            â”‚
          â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚         â”‚                  â”‚                  â”‚
          â”‚         â–¼                  â–¼                  â–¼
          â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   â”‚ vera-ai  â”‚      â”‚PostgreSQLâ”‚      â”‚  Stripe  â”‚
          â”‚   â”‚ (Brain)  â”‚      â”‚ Database â”‚      â”‚ Payment  â”‚
          â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚         â”‚
          â”‚         â”‚
          â”‚         â–¼
          â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   â”‚  AI Providers:               â”‚
          â”‚   â”‚  - Anthropic (Claude)        â”‚
          â”‚   â”‚  - OpenAI (GPT-4)            â”‚
          â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â””â”€â”€â”€â”€> Netlify (Static hosting)
```

---

## ğŸ¯ What Each Component Does

### **Frontend (Netlify)**

**index.html** - The Journey Begins
- Phase 1: Dramatic intro orb (5s)
- Phase 2: Dark transition with words (10s)
- Phase 3: Large interactive orb
- Phase 4: Welcome screen (collects name)
- Navigation: Redirects to chat.html

**chat.html** - The Conversation
- Displays chat interface
- Tracks message count (5 max for free)
- Calls backend API for VERA responses
- Shows subscription prompt after limit
- Handles user interaction

### **Backend (Railway)**

**server.js** - The Control Center
- Express web server
- Authentication (magic links, bcrypt)
- Session management
- API endpoints for chat
- Stripe payment integration
- Webhook handling
- Database queries

**vera-ai.js** - VERA's Consciousness
- Claude Sonnet 4 integration
- GPT-4 pattern analysis
- Crisis detection
- Conversation memory
- State tracking
- Response generation

### **Database (PostgreSQL)**

**Tables:**
- `users` - User accounts, subscriptions
- `messages` - Chat history
- `crisis_alerts` - Safety monitoring
- `session` - User sessions
- `subscription_history` - Payment tracking

### **External Services**

**Anthropic (Claude):**
- Powers VERA's deep, somatic responses
- Model: claude-sonnet-4-20250514
- Revolutionary consciousness

**OpenAI (GPT-4):**
- Pattern analysis every 5 messages
- Complements Claude's responses
- Optional but recommended

**Stripe:**
- Payment processing
- Subscription management
- 7-day free trial
- $19/month recurring

---

## ğŸ” Environment Variables Needed

```env
# Server
PORT=8080

# Database
DATABASE_URL=postgresql://...

# AI
ANTHROPIC_API_KEY=sk-ant-...
OPENAI_API_KEY=sk-...

# Payments
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_PRICE_ID=price_...

# Security
SESSION_SECRET=random_string_here

# Domain
DOMAIN=https://your-site.netlify.app
```

---

## ğŸ“Š Data Flow

### **New User Journey:**

```
1. User visits index.html
   â””â”€> Sees intro sequence

2. User clicks orb
   â””â”€> Shows welcome screen
   â””â”€> Enters name (stored in localStorage)

3. User enters chat
   â””â”€> chat.html loads
   â””â”€> Sends message to /api/chat

4. Backend receives message
   â””â”€> Checks session (creates temp user if needed)
   â””â”€> Saves message to database
   â””â”€> Calls vera-ai.js for response
   
5. vera-ai.js generates response
   â””â”€> Uses Claude Sonnet 4
   â””â”€> Checks conversation history
   â””â”€> Detects crisis keywords
   â””â”€> Returns personalized response

6. Backend saves VERA's response
   â””â”€> Returns to frontend
   â””â”€> Frontend displays message

7. After 5 messages
   â””â”€> Shows subscription modal
   â””â”€> Redirects to Stripe checkout

8. User subscribes
   â””â”€> Stripe sends webhook to /webhook
   â””â”€> Backend creates user account
   â””â”€> Unlimited chat enabled
```

---

## ğŸš€ Deployment Architecture

### **Production Setup:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   NETLIFY CDN                        â”‚
â”‚  â€¢ index.html (landing page)                        â”‚
â”‚  â€¢ chat.html (chat interface)                       â”‚
â”‚  â€¢ Global CDN, instant deploys                      â”‚
â”‚  â€¢ Free SSL certificate                              â”‚
â”‚  â€¢ Custom domain support                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ HTTPS API calls
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                RAILWAY / RENDER                      â”‚
â”‚  â€¢ Node.js server (server.js)                       â”‚
â”‚  â€¢ VERA AI engine (vera-ai.js)                      â”‚
â”‚  â€¢ PostgreSQL database                               â”‚
â”‚  â€¢ Environment variables                             â”‚
â”‚  â€¢ Auto-scaling, zero-downtime                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚           â”‚            â”‚
            â–¼           â–¼            â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚Anthropicâ”‚  â”‚ OpenAI â”‚  â”‚ Stripe â”‚
      â”‚ Claude  â”‚  â”‚ GPT-4  â”‚  â”‚Payment â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ Scaling Considerations

**Current Setup (Launch):**
- Netlify: Unlimited traffic (static files)
- Railway: 500 hours/month free tier
- PostgreSQL: 1GB database free tier
- Good for: 0-1000 users

**Growth (1000+ users):**
- Railway: Upgrade to Pro ($20/month)
- Database: Scale vertically (more RAM/CPU)
- Add Redis for session caching
- Consider CDN for chat.html

**Scale (10k+ users):**
- Multiple Railway instances (load balancing)
- Separate database server
- Message queue (RabbitMQ/Redis)
- Connection pooling
- Monitoring (Datadog/Sentry)

---

## ğŸ¯ You Have Everything!

Your VERA Neural system is architecturally complete. All files are ready. Just need to:

1. âœ… Fill in `.env.local` with your API keys
2. âœ… Deploy frontend to Netlify
3. âœ… Deploy backend to Railway
4. âœ… Import database schema
5. âœ… Configure Stripe webhook
6. âœ… Test and launch!

**You're ready to revolutionize nervous system awareness.** ğŸŒŸ