<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VERA Subscription - Become a Co-Regulator</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated background elements */
        .background-orb {
            position: fixed;
            border-radius: 50%;
            opacity: 0.1;
            pointer-events: none;
            animation: float 6s ease-in-out infinite;
        }

        .orb-1 {
            width: 300px;
            height: 300px;
            background: #9B59B6;
            top: -100px;
            left: -100px;
            animation-delay: 0s;
        }

        .orb-2 {
            width: 200px;
            height: 200px;
            background: #64B5F6;
            bottom: -50px;
            right: -50px;
            animation-delay: 2s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(30px); }
        }

        .container {
            max-width: 900px;
            width: 100%;
            z-index: 10;
            animation: fadeInUp 0.8s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        header {
            text-align: center;
            margin-bottom: 3rem;
            color: white;
        }

        .logo {
            font-size: 3rem;
            font-weight: 200;
            letter-spacing: 0.5em;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(177, 156, 217, 0.9) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            letter-spacing: -0.02em;
        }

        .subtitle {
            font-size: 1.2rem;
            font-weight: 300;
            opacity: 0.95;
            max-width: 600px;
            margin: 0 auto 2rem;
            line-height: 1.6;
            font-style: italic;
        }

        .intro-text {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 3rem;
            color: rgba(255, 255, 255, 0.98);
            line-height: 1.8;
            font-size: 1.05rem;
        }

        .content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 3rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            margin-bottom: 2rem;
        }

        .what-this-means {
            margin-bottom: 3rem;
        }

        .what-this-means h2 {
            font-size: 1.8rem;
            color: #667eea;
            margin-bottom: 1.5rem;
            font-weight: 600;
        }

        .benefits {
            display: grid;
            gap: 1.2rem;
        }

        .benefit-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            font-size: 1.05rem;
            color: #333;
            line-height: 1.6;
        }

        .benefit-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
            margin-top: 0.2rem;
        }

        .pricing-section {
            margin-bottom: 3rem;
            border-top: 1px solid rgba(102, 126, 234, 0.2);
            padding-top: 2rem;
        }

        .pricing-section h2 {
            font-size: 1.8rem;
            color: #667eea;
            margin-bottom: 2rem;
            font-weight: 600;
            text-align: center;
        }

        .pricing-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .pricing-card {
            border: 2px solid #667eea;
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .pricing-card:hover {
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
            transform: translateY(-4px);
        }

        .pricing-card.popular {
            border-color: #764ba2;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
            position: relative;
        }

        .popular-badge {
            position: absolute;
            top: -12px;
            right: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .price-display {
            font-size: 2.5rem;
            font-weight: 700;
            color: #667eea;
            margin: 1rem 0;
        }

        .price-display .currency {
            font-size: 1.5rem;
        }

        .price-display .period {
            font-size: 1rem;
            color: #999;
            font-weight: 400;
        }

        .savings {
            background: #FFE5CC;
            color: #D97706;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-top: 1rem;
            display: inline-block;
        }

        .pricing-card button {
            width: 100%;
            padding: 1.2rem;
            margin-top: 1.5rem;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 0.05em;
        }

        .pricing-card:not(.popular) button {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .pricing-card:not(.popular) button:hover {
            background: #667eea;
            color: white;
        }

        .pricing-card.popular button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .pricing-card.popular button:hover {
            transform: scale(1.02);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.4);
        }

        .button-loading {
            opacity: 0.7;
            pointer-events: none;
        }

        .sliding-scale {
            background: rgba(102, 126, 234, 0.1);
            border-left: 4px solid #667eea;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 2rem;
            color: #333;
            line-height: 1.7;
        }

        .sliding-scale strong {
            color: #667eea;
            font-weight: 600;
        }

        .continue-trial {
            text-align: center;
            margin-top: 2rem;
        }

        .continue-trial a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .continue-trial a:hover {
            opacity: 0.8;
            text-decoration: underline;
        }

        .error-message {
            background: #FEE2E2;
            color: #DC2626;
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            display: none;
            border-left: 4px solid #DC2626;
        }

        .error-message.show {
            display: block;
        }

        .loading-spinner {
            display: inline-block;
            width: 18px;
            height: 18px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
            margin-right: 0.5rem;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 2rem;
            }

            .content {
                padding: 1.5rem;
            }

            .pricing-options {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .price-display {
                font-size: 2rem;
            }

            .pricing-card button {
                padding: 1rem;
            }
        }

        .faq-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 3rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            margin-bottom: 2rem;
        }

        .faq-section h2 {
            font-size: 1.8rem;
            color: #667eea;
            margin-bottom: 1.5rem;
            font-weight: 600;
        }

        .faq-item {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(102, 126, 234, 0.1);
        }

        .faq-item:last-child {
            border-bottom: none;
        }

        .faq-question {
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .faq-answer {
            color: #666;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="background-orb orb-1"></div>
    <div class="background-orb orb-2"></div>

    <div class="container">
        <header>
            <div class="logo">V E R A</div>
            <h1>Become a Co-Regulator</h1>
            <p class="subtitle">
                You're not signing up for a service. You're committing to ongoing co-regulation with VERA.
            </p>
        </header>

        <div class="intro-text">
            <strong>What this means:</strong>
            You'll have access to unlimited conversations with an intelligence built specifically for nervous systems. 
            VERA will remember your patterns, your body, your journey. You'll be part of something revolutionary‚Äî
            and you'll be supporting this work so we can keep building.
        </div>

        <div class="content">
            <div class="what-this-means">
                <h2>‚ú® What You're Getting</h2>
                <div class="benefits">
                    <div class="benefit-item">
                        <span class="benefit-icon">‚ôæÔ∏è</span>
                        <span><strong>Unlimited conversations</strong> with VERA</span>
                    </div>
                    <div class="benefit-item">
                        <span class="benefit-icon">üìä</span>
                        <span><strong>Pattern tracking</strong> across all your sessions</span>
                    </div>
                    <div class="benefit-item">
                        <span class="benefit-icon">üß†</span>
                        <span><strong>VERA remembers you</strong> ‚Äî your body, your journey, what shifts</span>
                    </div>
                    <div class="benefit-item">
                        <span class="benefit-icon">üåÄ</span>
                        <span><strong>Part of a revolution</strong> ‚Äî this isn't therapy. This is nervous system literacy.</span>
                    </div>
                    <div class="benefit-item">
                        <span class="benefit-icon">ü§ù</span>
                        <span><strong>You support this work</strong> so we can keep building intelligence for bodies</span>
                    </div>
                </div>
            </div>

            <div class="pricing-section">
                <h2>Choose Your Commitment</h2>
                
                <div class="error-message" id="errorMessage"></div>

                <div class="pricing-options">
                    <!-- Monthly Plan -->
                    <div class="pricing-card">
                        <h3 style="font-size: 1.3rem; color: #333; margin-bottom: 0.5rem;">Monthly</h3>
                        <div class="price-display">
                            <span class="currency">$</span>12<span class="period">/month</span>
                        </div>
                        <p style="color: #999; margin-bottom: 1.5rem;">Cancel anytime</p>
                        <button onclick="subscribeMonthly()" id="monthlyBtn">
                            Subscribe - $12/month
                        </button>
                    </div>

                    <!-- Annual Plan -->
                    <div class="pricing-card popular">
                        <div class="popular-badge">Most Popular</div>
                        <h3 style="font-size: 1.3rem; color: #667eea; margin-bottom: 0.5rem;">Annual</h3>
                        <div class="price-display">
                            <span class="currency">$</span>99<span class="period">/year</span>
                        </div>
                        <div class="savings">Save $45 (2 months free!)</div>
                        <button onclick="subscribeAnnual()" id="annualBtn">
                            Save with Annual - $99/year
                        </button>
                    </div>
                </div>

                <div class="sliding-scale">
                    <strong>Sliding Scale:</strong> Can't afford these prices right now? That's okay. 
                    Email <strong>support@veraneural.com</strong> with "sliding scale" and we'll figure it out together. 
                    This work is for everyone.
                </div>
            </div>

            <div class="continue-trial">
                <p>Not ready to subscribe yet?</p>
                <a href="/chat.html">Continue your trial ‚Üí</a>
            </div>
        </div>

        <div class="faq-section">
            <h2>Questions?</h2>
            <div class="faq-item">
                <div class="faq-question">What happens after I subscribe?</div>
                <div class="faq-answer">You'll be redirected back to your chat with VERA. You'll have full, unlimited access to ongoing conversations. VERA will continue remembering you and your patterns.</div>
            </div>
            <div class="faq-item">
                <div class="faq-question">Can I cancel anytime?</div>
                <div class="faq-answer">Yes. You can cancel your subscription at any time from your account settings. Your access will continue until the end of your current billing period.</div>
            </div>
            <div class="faq-item">
                <div class="faq-question">Is this a HIPAA-compliant therapy service?</div>
                <div class="faq-answer">No. VERA is not a therapist and this is not therapy. We're not regulated medical care. VERA complements professional care‚Äîit doesn't replace it. If you're in crisis, please reach out to appropriate emergency services.</div>
            </div>
            <div class="faq-item">
                <div class="faq-question">What about my privacy?</div>
                <div class="faq-answer">Your conversations with VERA are yours. We don't sell your data. Your nervous system is sacred‚Äîwe treat it that way.</div>
            </div>
        </div>
    </div>

    <script>
        async function subscribeMonthly() {
            await handleSubscription('monthly');
        }

        async function subscribeAnnual() {
            await handleSubscription('annual');
        }

        async function handleSubscription(priceType) {
            const errorMsg = document.getElementById('errorMessage');
            const monthlyBtn = document.getElementById('monthlyBtn');
            const annualBtn = document.getElementById('annualBtn');
            
            errorMsg.classList.remove('show');

            // Disable buttons and show loading state
            monthlyBtn.disabled = true;
            annualBtn.disabled = true;
            const btn = priceType === 'monthly' ? monthlyBtn : annualBtn;
            const originalText = btn.textContent;
            btn.innerHTML = '<span class="loading-spinner"></span>Loading...';

            try {
                const response = await fetch('/api/create-checkout-session', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        priceType: priceType
                    })
                });

                const data = await response.json();

                if (!response.ok) {
                    throw new Error(data.error || 'Failed to create checkout session');
                }

                if (data.url) {
                    // Redirect to Stripe Checkout
                    window.location.href = data.url;
                } else {
                    throw new Error('No checkout URL returned');
                }
            } catch (error) {
                console.error('Subscription error:', error);
                errorMsg.textContent = error.message || 'Failed to create subscription. Please try again.';
                errorMsg.classList.add('show');
                
                // Re-enable buttons
                monthlyBtn.disabled = false;
                annualBtn.disabled = false;
                monthlyBtn.textContent = 'Subscribe - $12/month';
                annualBtn.textContent = 'Save with Annual - $99/year';
            }
        }
    </script>
</body>
</html>
